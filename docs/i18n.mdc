# Internationalisation (i18n)

## Vue d'ensemble

Le syst√®me de traduction de Beji utilise un syst√®me de messages bas√© sur JSON avec support pour 4 langues :
- `en` (English)
- `fr` (Fran√ßais)
- `it` (Italiano)
- `fa` (ŸÅÿßÿ±ÿ≥€å)

## Structure des fichiers de traduction

Les fichiers de traduction se trouvent dans le dossier `messages/` :
- `messages/en.json` - Traductions en anglais (langue par d√©faut)
- `messages/fr.json` - Traductions en fran√ßais
- `messages/it.json` - Traductions en italien
- `messages/fa.json` - Traductions en persan

## Structure des cl√©s de traduction

Les cl√©s sont organis√©es par section/feature :

```json
{
  "Start": {
    "subtitle": "...",
    "chooseEmojiLabel": "...",
    ...
  },
  "Login": {
    "title": "...",
    "subtitle": "...",
    ...
  },
  "UserMenu": {
    "userMenuLabel": "...",
    "disconnect": "...",
    ...
  },
  "World": {
    "loadingWorld": "...",
    "error": "...",
    ...
  }
}
```

## Utilisation dans les composants

### 1. Importer le hook `useMessages`

```tsx
import { useMessages } from "../i18n/DictionaryProvider";
```

### 2. Utiliser le hook dans le composant

```tsx
export function MyComponent() {
  const { messages } = useMessages<{ 
    MySection: { 
      myKey: string;
      anotherKey: string;
    } 
  }>();
  
  return (
    <div>
      {messages.MySection?.myKey ?? "Fallback text"}
    </div>
  );
}
```

### 3. Pattern recommand√©

- Toujours utiliser l'op√©rateur de coalescence nulle (`??`) pour fournir un texte de fallback
- Le fallback doit √™tre en anglais (langue par d√©faut)
- Typage TypeScript pour la s√©curit√© des types

## Ajouter de nouvelles traductions

### 1. Ajouter la cl√© dans `messages/en.json`

```json
{
  "NewSection": {
    "newKey": "English text"
  }
}
```

### 2. Ajouter la traduction dans tous les autres fichiers

- `messages/fr.json` - Traduction fran√ßaise
- `messages/it.json` - Traduction italienne
- `messages/fa.json` - Traduction persane

**Important** : Tous les fichiers doivent avoir la m√™me structure de cl√©s. Si une cl√© existe dans `en.json`, elle doit exister dans tous les autres fichiers.

### 3. Utiliser dans le composant

```tsx
const { messages } = useMessages<{ 
  NewSection: { newKey: string } 
}>();

// Utilisation
{messages.NewSection?.newKey ?? "Fallback"}
```

## Sections de traduction existantes

### `Start`
- `subtitle` - Sous-titre de la page de d√©marrage
- `chooseEmojiLabel` - Label pour choisir un emoji
- `nameLabel` - Label pour le nom du Beji
- `namePlaceholder` - Placeholder pour le champ nom
- `startButton` - Texte du bouton de d√©marrage
- `creating` - Texte pendant la cr√©ation
- `existingBejisLabel` - Label pour la liste des Bejis existants
- `joinWorldLabel` - Label pour rejoindre un monde
- `createNewBejiLabel` - Label pour cr√©er un nouveau Beji
- `loadingBejisLabel` - Texte pendant le chargement des Bejis
- `noBejisLabel` - Message quand l'utilisateur n'a pas de Bejis

### `Login`
- `title` - Titre de la page de connexion
- `subtitle` - Sous-titre de la page de connexion
- `signInButton` - Texte du bouton de connexion

### `UserMenu`
- `userMenuLabel` - Label ARIA pour le menu utilisateur
- `disconnect` - Texte du bouton de d√©connexion
- `language` - Label pour la section langue

### `World`
- `loadingWorld` - Texte pendant le chargement d'un monde
- `error` - Pr√©fixe pour les messages d'erreur
- `worldIdRequired` - Message d'erreur quand l'ID du monde est requis
- `worldNotFound` - Message d'erreur quand le monde n'est pas trouv√©
- `invalidWorldData` - Message d'erreur pour donn√©es invalides
- `failedToLoadWorld` - Message d'erreur g√©n√©ral

### `WorldDrawer`
- `home` - Label pour le bouton d'accueil
- `homeAriaLabel` - Label ARIA pour le bouton d'accueil
- `worldLabel` - Label pour "Monde" dans les tooltips
- `goToWorldAriaLabel` - Label ARIA pour aller au monde d'un Beji

### `Actions`
- `zoomToBeji` - Label pour l'action zoom vers Beji
- `zoomToBejiShortcut` - Tooltip avec raccourci pour zoom vers Beji
- `toggleFollowMouse` - Label pour basculer le suivi de la souris
- `followingMouse"` - √âtat actif du suivi de la souris
- `notFollowingMouse"` - √âtat inactif du suivi de la souris
- `shortcutSuffix"` - Suffixe pour les raccourcis clavier (ex: " ‚Ä¢ Shortcut: Z")

## Bonnes pratiques

1. **Coh√©rence** : Utilisez des noms de cl√©s descriptifs et coh√©rents
2. **Fallback** : Toujours fournir un texte de fallback en anglais
3. **Typage** : Utilisez TypeScript pour typer les messages
4. **Compl√©tude** : Assurez-vous que toutes les cl√©s existent dans tous les fichiers de langue
5. **Contexte** : Les cl√©s doivent √™tre suffisamment descriptives pour comprendre leur usage
6. **Pas de texte hardcod√©** : √âvitez les cha√Ænes de caract√®res hardcod√©es dans les composants

## V√©rification

Pour v√©rifier que toutes les traductions sont compl√®tes :

1. V√©rifiez que toutes les cl√©s de `en.json` existent dans les autres fichiers
2. Recherchez les cha√Ænes hardcod√©es dans le code avec des outils comme `grep`
3. Testez l'application dans toutes les langues support√©es

## Exemple complet

```tsx
// Composant
import { useMessages } from "../i18n/DictionaryProvider";

export function LoginPage() {
  const { messages } = useMessages<{ 
    Login: { 
      title: string;
      subtitle: string;
      signInButton: string;
    } 
  }>();
  
  return (
    <div>
      <h1>{messages.Login?.title ?? "Welcome to Beji üéÆ"}</h1>
      <p>{messages.Login?.subtitle ?? "Connect with your Google account"}</p>
      <button>{messages.Login?.signInButton ?? "Sign in with Google"}</button>
    </div>
  );
}
```

```json
// messages/en.json
{
  "Login": {
    "title": "Welcome to Beji üéÆ",
    "subtitle": "Connect with your Google account to start playing",
    "signInButton": "Sign in with Google"
  }
}
```

```json
// messages/fr.json
{
  "Login": {
    "title": "Bienvenue sur Beji üéÆ",
    "subtitle": "Connectez-vous avec votre compte Google pour commencer √† jouer",
    "signInButton": "Se connecter avec Google"
  }
}
```
