[build]
  command = "pnpm build:client"
  publish = "dist"

[build.environment]
  NODE_VERSION = "22"
  # Server-side secrets are safe to use in server runtime
  # They should not be exposed to the client, but Netlify's secret scanner
  # may detect them in server-side build artifacts. Configure it to ignore them.
  SECRETS_SCAN_OMIT_KEYS = "REDIS_URL,REDIS_HOST,REDIS_PORT,REDIS_USERNAME,REDIS_PASSWORD,REDIS_TLS,JWT_SECRET,GOOGLE_CLIENT_ID,GOOGLE_CLIENT_SECRET"

# SPA routing - redirect all routes to index.html for client-side routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
