syntax = "proto3";

package world.v1;

import "player/v1/player.proto";
import "beji/v1/beji.proto";
import "staticbeji/v1/staticbeji.proto";

option go_package = "github.com/pouyajoon/beji/world/v1";

// World service for creating and retrieving worlds
service WorldService {
  // CreateWorld creates a new world for a beji with static bejis
  rpc CreateWorld (CreateWorldRequest) returns (CreateWorldResponse);
  
  // GetWorld retrieves a world and all its associated data (beji, static bejis)
  rpc GetWorld (GetWorldRequest) returns (GetWorldResponse);
}

// Request to create a new world
message CreateWorldRequest {
  string beji_name = 1; // Name for the main beji
  repeated int32 emoji_codepoints = 2; // Emoji codepoints for the main beji
}

// Response containing the created world data
message CreateWorldResponse {
  WorldData world = 1;
}

// Request to get a world
message GetWorldRequest {
  string world_id = 1;
}

// Response containing world data
message GetWorldResponse {
  WorldData world = 1;
}

// Complete world data structure
message WorldData {
  World world = 1;
  player.v1.Player player = 2;
  beji.v1.Beji beji = 3;
  repeated staticbeji.v1.StaticBeji static_beji = 4;
}

// World message
message World {
  string id = 1;
  string main_beji_id = 2;
  repeated string static_beji_ids = 3;
  int64 created_at = 4;
}

